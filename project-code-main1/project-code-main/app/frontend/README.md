# Frontend

## Running the frontend

Frontend is a `vite` app using the `React` frontend framework. The setup is using `npm` as the package manager.
To start the frontend, there are two options:

### Start frontend separately

This is the preferred way for development. The best way to do this is to run the `start-frontend` script from the `frontend` folder. This will handle everything that is needed. Alternatively, you can do this manually by running `npm install` followed by `npm run dev:full` from inside the `frontend` folder. However, for this to work the backend folder needs to be running as well, so you need to start the backend separately by running `start-backend` from the `backend` folder.

### Start frontend and backend together

If you want to start the frontend and backend together, you can run the `start` script from the `app` folder. This will start the backend and frontend together.

## Technology stack

The frontend uses the following technologies:

- `React` as the frontend framework
- `TypeScript` or `JavaScript` as the programming language. Although `TypeScript` is preferred for its type safety which helps with debugging and development. But in case of a preference for `JavaScript`, it is also supported.
- `TailwindCSS` as the CSS framework. This is a utility-first CSS framework, which allows for easy styling of the components. It is also very easy to customize and extend. Vanilla CSS is also supported, but it is more useful for defining complex styles, which are not possible with `TailwindCSS`. CSS requires its own `.css` file, which is imported into the component. `TailwindCSS` on the other hand is really easy to use and can be use directly in the component, in the `className` attribute of the component. The advantage of using `TailwindCSS` is that it is much more concise, e.g. `className="mb-4` instead of `style={{marginBottom: "16px}}`. `TailwindCSS` also allows for easy defining of global styles, which are used across the whole application and can be changed at any time. This is done in the `tailwind.config.js` file. For more information about `TailwindCSS`, see [here](https://tailwindcss.com/docs).
- `Vite` as the bundler. This is a really fast bundler, which is also very easy to use. It is also very easy to extend and customize. For more information about `Vite`, see [here](https://vitejs.dev/).
- `eslint` as the linter. This is a really useful tool, which helps with code quality and consistency. It is also very easy to customize and extend. For more information about `eslint`, see [here](https://eslint.org/). `eslint` should be running automatically in VS Code if the `eslint-prettier` extension is installed, but to manually run `eslint` use `npm run lint`.
- `prettier` as the code formatter for code formatting to keep the coding style consistent across the project. For more information about `prettier`, see [here](https://prettier.io/).
- `openapi` as the API specification. It allows for easy definition of the API. It also allows for easy generation of the API client, which is used in the frontend to communicate with the backend. For more information about `openapi`, see [here](https://swagger.io/specification/).

## Frontend structure

- The root of the frontend contains only configuration files, related to the frontend itself. These include typescript, eslint, prettier, tailwindcss and vite configurations.
- The webpage is a SPA (single page application), which means that there is only one HTML file, which is the `index.html` file in the root of the frontend. This file contains the `div` element with the `id="root"`, which is the root of the application. The `index.html` file also contains the `script` tag, which imports the `index.tsx` file, which is the entry point of the application. The `index.tsx` file defines the routes of the application, which are then used to load different 'pages' into the `index.html`. Each page is composed of react components which are the building blocks of the `frontend`. The `frontend` talks to the `backend` via API calls. The API calls are used by the `frontend` to request data from the `backend` and to send data to the `backend`.

### `generated` folder

This folder has been generated using `openapi` and the `openapi-typescript` tool. The folder contains all the types from the `backend` API (declared in `domain/model.py` and used in backend endpoints). This way the types of the API calls in the `api` folder are automatically generated. To generate the types, first run the backend server separately and go to `localhost:5000/openapi`. Select `swagger` and click `openapi.json`. Save this file into `app/frontend/generated/openapi.json`. Now, the types can be generated by running `npx openapi-typescript generated/openapi.json -o generated/schema.d.ts` from the `frontend` folder.

### `src` folder

- The `src` folder contains the actual frontend code. The `src` folder is structured as follows:
  - There are four main folders in the `src` folder: `components`, `pages`, `assets` and `api`.
  - The `components` folder contains all the components that are used in the frontend.
  - The `pages` folder contains all the pages that are used in the frontend.
  - The `assets` folder contains all the assets that are used in the frontend. This includes images, fonts, etc.
  - The `api` folder contains all the API calls to the `backend`. This is how `frontend` communicates with `backend` - by making API calls to the API exposed by the `backend`.

#### `components` folder

The `components` folder contains all the components that are used in the frontend. The suggested structure is as follows. Each component has its own folder, which contains the component itself (possibly multiple JavaScript/TypeScript files), a `.css` file, if needed, and possibly a `tests` folder. The component itself is a `.tsx` or `.jsx` file, which contains the component itself. The component should be exported as default. The component should be named the same as the directory it is in.

#### `pages` folder

The `pages` folder contains all the pages that are used in the frontend. Each page should be placed in its own directory. The directory should contain a `.tsx` or `.jsx` file, which contains the page itself. The page should be exported as default. The page should be named the same as the directory it is in.

#### `assets` folder

The `assets` folder contains all the assets that are used in the frontend. This includes images, fonts, etc. Each type of asset should be in its own folder, i.e. all images should be in the `images` folder, all icons should be in the `icons` folder, etc.

#### `api` folder

The `api` folder contains all the API calls to the `backend`. This is how `frontend` communicates with `backend` - by making API calls to the API exposed by the `backend`. Each API call should be defined in the `services` folder. Multiple API calls can be in the same file if they relate to the same API, e.g. `maps` or `users`, etc. *Every API call MUST be defined in the `services` folder.* Additionally, every API call should import and use the `api` wrapper from `/src/api/api.ts` as it defines the authentication needed to communicate with the backend.
For convenience, it is also recommended that every API defined in the `services` folder and every API call from that API are converted into a react hook, defined in `/src/api/hooks/` directory. This allows for easy usage of the API calls in the frontend. It avoids having to deal with promises, states (`useState`), effects (`useEffect`) etc. The hooks are created really easily with the `react-query` library (see `/src/api/hooks/test.hook.ts`)
